<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="styles/reset.css" />
    <link rel="stylesheet" href="styles/tokens.css" />
    <link rel="stylesheet" href="styles/page.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Playfair+Display:wght@400;700&display=swap"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />
    <title>Uni Market</title>
    <link rel="icon" href="assets/storeLogo.svg" type="image/svg+xml" />
    <script type="importmap">
      {
        "imports": {
          "@calpoly/mustang": "https://unpkg.com/@calpoly/mustang"
        }
      }
    </script>
    <script type="module">
      import { define } from "@calpoly/mustang";
      import { ListingHeader } from "../js/listing-header.js";
      import { UnimarketListings } from "../js/uni-market-listings.js";

      define({
        "listing-header": ListingHeader,
        "uni-market-listings": UnimarketListings
      });
    </script>
    <script type="module">
      import { Events } from "@calpoly/mustang";

      window.relayEvent = Events.relay;
    </script>
    <script type="module">
      function toggleDarkMode(page, checked) {
        page.classList.toggle("dark-mode", checked);
      }

      document.body.addEventListener("dark-mode", (event) =>
        toggleDarkMode(event.currentTarget, event.detail.checked)
      );
    </script>
  </head>
  <body>
    <header>
      <h1 class="navBar">
        <svg class="icon-market">
          <use href="../icons/icons.svg#icon-market" />
        </svg>
        <span><a href="index.html"></a>UniMarket</span>
      </h1>
      <drop-down>
        <label
          onchange="relayEvent(
            event,
            'dark-mode',
            {checked: event.target.checked})"
        >
          <input type="checkbox" autocomplete="off" />
          Dark mode
        </label>
      </drop-down>
    </header>
    <uni-market-listings src="/api/listings"></uni-market-listings>
  </body>
</html>
